<!--
  BILD Design System - Storybook Preview Head

  1. CSS Bundles (Dual-Axis Architecture):
     - bild.css: BILD colors + BILD content tokens
     - sportbild.css: SportBILD colors + SportBILD content tokens
     - advertorial.css: Advertorial content tokens only (uses parent color brand)

  2. Stencil Components:
     - Loaded via ESM module for custom element registration

  IMPORTANT: All data attributes are set on document.documentElement (html element)
  because CSS selectors require all attributes on the same element:
  [data-color-brand="bild"][data-theme="light"] { ... }
-->

<!-- Design Token CSS Bundles (relative paths for GitHub Pages compatibility) -->
<link rel="stylesheet" href="./css/bundles/bild.css" />
<link rel="stylesheet" href="./css/bundles/sportbild.css" />
<link rel="stylesheet" href="./css/bundles/advertorial.css" />

<!-- Stencil Web Components -->
<script type="module" src="./stencil/bds/bds.esm.js"></script>

<style>
  /* Ensure Storybook canvas uses design system tokens */
  body {
    font-family: var(--font-family-gotham, system-ui, -apple-system, sans-serif);
    background-color: var(--surface-color-canvas, #F0F2F4);
    color: var(--text-color-primary, #232629);
    margin: 0;
  }

  /* Story wrapper inherits tokens from html element's data attributes */
  .sb-show-main {
    background-color: transparent;
  }

  /* ========================================
     Storybook Docs Theme Overrides
     These ensure the docs pages adapt to dark mode
     ======================================== */

  /* Docs page wrapper */
  .sbdocs-wrapper {
    background-color: var(--surface-color-canvas, #F0F2F4) !important;
  }

  /* Docs content area */
  .sbdocs-content {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Docs preview/story containers */
  .docs-story,
  .sbdocs-preview {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  /* MDX content typography */
  .sbdocs h1, .sbdocs h2, .sbdocs h3, .sbdocs h4, .sbdocs h5, .sbdocs h6,
  .sbdocs-h1, .sbdocs-h2, .sbdocs-h3, .sbdocs-h4, .sbdocs-h5, .sbdocs-h6 {
    color: var(--text-color-primary, #232629) !important;
  }

  .sbdocs p, .sbdocs li, .sbdocs td, .sbdocs th,
  .sbdocs-p {
    color: var(--text-color-primary, #232629) !important;
  }

  /* Code blocks */
  .sbdocs code,
  .sbdocs pre {
    background-color: var(--surface-color-tertiary, #E8EAED) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Tables */
  .sbdocs table {
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  .sbdocs th {
    background-color: var(--surface-color-secondary, #F2F4F5) !important;
  }

  .sbdocs td, .sbdocs th {
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  /* Links */
  .sbdocs a {
    color: var(--text-color-accent, #DD0000) !important;
  }

  /* Horizontal rules */
  .sbdocs hr {
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  /* Blockquotes */
  .sbdocs blockquote {
    background-color: var(--surface-color-secondary, #F2F4F5) !important;
    border-left-color: var(--core-color-primary, #DD0000) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* ArgTypes/Controls tables */
  .docblock-argstable {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
  }

  .docblock-argstable th,
  .docblock-argstable td {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* ========================================
     Additional Dark Mode Overrides
     Story containers, controls, inputs
     ======================================== */

  /* Story canvas/preview area */
  .sb-show-main.sb-main-padded {
    background-color: var(--surface-color-canvas, #F0F2F4) !important;
  }

  /* Docs story preview wrapper */
  .sbdocs .sb-story,
  .sbdocs-preview .sb-story,
  .docs-story > div,
  .docs-story > div > div {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
  }

  /* Story source/code container */
  .docblock-source {
    background-color: var(--surface-color-tertiary, #E8EAED) !important;
  }

  .docblock-source pre,
  .docblock-source code {
    background-color: transparent !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Table striped rows */
  .sbdocs tr:nth-child(even),
  .docblock-argstable tr:nth-child(even) {
    background-color: var(--surface-color-secondary, #F2F4F5) !important;
  }

  .sbdocs tr:nth-child(odd),
  .docblock-argstable tr:nth-child(odd) {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
  }

  /* Controls panel */
  .docblock-argstable-body td {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Input fields in controls */
  .docblock-argstable input,
  .docblock-argstable select,
  .docblock-argstable textarea {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Control labels and descriptions */
  .docblock-argstable-body td span,
  .docblock-argstable-body td p {
    color: var(--text-color-primary, #232629) !important;
  }

  /* Subtitle/description text */
  .sbdocs .sbdocs-subtitle,
  .sbdocs .sbdocs-description {
    color: var(--text-color-secondary, #666B70) !important;
  }

  /* Addon panel backgrounds */
  [id^="panel-tab-content"] {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
  }

  /* ArgsTable header row */
  .docblock-argstable thead tr {
    background-color: var(--surface-color-secondary, #F2F4F5) !important;
  }

  .docblock-argstable thead th {
    background-color: var(--surface-color-secondary, #F2F4F5) !important;
    color: var(--text-color-secondary, #666B70) !important;
  }

  /* Reset button and other small buttons */
  .docblock-argstable button {
    background-color: var(--surface-color-tertiary, #E8EAED) !important;
    color: var(--text-color-primary, #232629) !important;
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  /* Type badges/pills */
  .docblock-argstable-body td code {
    background-color: var(--surface-color-tertiary, #E8EAED) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Property name column */
  .docblock-argstable-body td:first-child {
    color: var(--text-color-primary, #232629) !important;
  }

  /* Default value display */
  .docblock-argstable-body td:last-child {
    color: var(--text-color-primary, #232629) !important;
  }

  /* Canvas toolbar */
  .sb-bar {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
    border-color: var(--border-color-low-contrast, #CED4DA) !important;
  }

  .sb-bar button {
    color: var(--text-color-primary, #232629) !important;
  }

  /* Zoom/viewport toolbar */
  [class*="zoom"] {
    background-color: var(--surface-color-primary, #FFFFFF) !important;
  }

  /* Empty state messages */
  .sb-nopreview,
  .sb-errordisplay {
    background-color: var(--surface-color-canvas, #F0F2F4) !important;
    color: var(--text-color-primary, #232629) !important;
  }

  /* Syntax highlighting adjustments for dark mode */
  .token.comment,
  .token.prolog,
  .token.doctype,
  .token.cdata {
    color: var(--text-color-tertiary, #9CA3AB) !important;
  }

  .token.property,
  .token.tag,
  .token.boolean,
  .token.number,
  .token.constant,
  .token.symbol {
    color: var(--core-color-primary, #DD0000) !important;
  }

  .token.selector,
  .token.attr-name,
  .token.string,
  .token.char,
  .token.builtin {
    color: var(--text-color-accent, #DD0000) !important;
  }

  /* ========================================
     EXPLICIT DARK MODE OVERRIDES
     Using [data-theme="dark"] with hardcoded colors
     because CSS variables require multiple selectors
     ======================================== */

  [data-theme="dark"] body,
  [data-theme="dark"] .sbdocs-wrapper,
  html[data-theme="dark"] body,
  html[data-theme="dark"] .sbdocs-wrapper {
    background-color: #1C1C1C !important;
  }

  [data-theme="dark"] .sbdocs-content,
  html[data-theme="dark"] .sbdocs-content {
    background-color: #232629 !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .docs-story,
  [data-theme="dark"] .sbdocs-preview,
  html[data-theme="dark"] .docs-story,
  html[data-theme="dark"] .sbdocs-preview {
    background-color: #232629 !important;
    border-color: #4B525A !important;
  }

  [data-theme="dark"] .sbdocs h1,
  [data-theme="dark"] .sbdocs h2,
  [data-theme="dark"] .sbdocs h3,
  [data-theme="dark"] .sbdocs h4,
  [data-theme="dark"] .sbdocs h5,
  [data-theme="dark"] .sbdocs h6,
  [data-theme="dark"] .sbdocs-h1,
  [data-theme="dark"] .sbdocs-h2,
  [data-theme="dark"] .sbdocs-h3,
  html[data-theme="dark"] .sbdocs h1,
  html[data-theme="dark"] .sbdocs h2,
  html[data-theme="dark"] .sbdocs h3,
  html[data-theme="dark"] .sbdocs h4,
  html[data-theme="dark"] .sbdocs h5,
  html[data-theme="dark"] .sbdocs h6 {
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .sbdocs p,
  [data-theme="dark"] .sbdocs li,
  [data-theme="dark"] .sbdocs td,
  [data-theme="dark"] .sbdocs th,
  [data-theme="dark"] .sbdocs-p,
  html[data-theme="dark"] .sbdocs p,
  html[data-theme="dark"] .sbdocs li,
  html[data-theme="dark"] .sbdocs td,
  html[data-theme="dark"] .sbdocs th {
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .sbdocs code,
  [data-theme="dark"] .sbdocs pre,
  html[data-theme="dark"] .sbdocs code,
  html[data-theme="dark"] .sbdocs pre {
    background-color: #2E3438 !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .sbdocs table,
  html[data-theme="dark"] .sbdocs table {
    border-color: #4B525A !important;
  }

  [data-theme="dark"] .sbdocs th,
  html[data-theme="dark"] .sbdocs th {
    background-color: #2E3438 !important;
  }

  [data-theme="dark"] .sbdocs td,
  [data-theme="dark"] .sbdocs th,
  html[data-theme="dark"] .sbdocs td,
  html[data-theme="dark"] .sbdocs th {
    border-color: #4B525A !important;
  }

  [data-theme="dark"] .sbdocs a,
  html[data-theme="dark"] .sbdocs a {
    color: #FF6B6B !important;
  }

  [data-theme="dark"] .sbdocs blockquote,
  html[data-theme="dark"] .sbdocs blockquote {
    background-color: #2E3438 !important;
    border-left-color: #DD0000 !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .docblock-argstable,
  html[data-theme="dark"] .docblock-argstable {
    background-color: #232629 !important;
  }

  [data-theme="dark"] .docblock-argstable th,
  [data-theme="dark"] .docblock-argstable td,
  html[data-theme="dark"] .docblock-argstable th,
  html[data-theme="dark"] .docblock-argstable td {
    background-color: #232629 !important;
    border-color: #4B525A !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .docblock-source,
  html[data-theme="dark"] .docblock-source {
    background-color: #2E3438 !important;
  }

  [data-theme="dark"] .docblock-source pre,
  [data-theme="dark"] .docblock-source code,
  html[data-theme="dark"] .docblock-source pre,
  html[data-theme="dark"] .docblock-source code {
    background-color: transparent !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .sb-bar,
  html[data-theme="dark"] .sb-bar {
    background-color: #232629 !important;
    border-color: #4B525A !important;
  }

  [data-theme="dark"] .sb-bar button,
  html[data-theme="dark"] .sb-bar button {
    color: #F2F4F5 !important;
  }

  /* Dark mode for main wrapper elements */
  [data-theme="dark"] #storybook-docs,
  html[data-theme="dark"] #storybook-docs {
    background-color: #1C1C1C !important;
    color: #F2F4F5 !important;
  }

  [data-theme="dark"] .sb-show-main,
  html[data-theme="dark"] .sb-show-main {
    background-color: #1C1C1C !important;
  }
</style>

<script>
  // Set initial data attributes on documentElement (html) for CSS token inheritance
  // All attributes must be on the same element for CSS selectors to match:
  // [data-color-brand="bild"][data-theme="light"] { ... }
  (function() {
    var html = document.documentElement;
    html.setAttribute('data-color-brand', 'bild');
    html.setAttribute('data-content-brand', 'bild');
    html.setAttribute('data-theme', 'light');
    html.setAttribute('data-density', 'default');
  })();
</script>
